[90m;; [39m[90mSpartan REPL. Type ;help for help.[39m
2 [33m|[39m [90m;; [39mDisabled autorun.
2 [33m|[39m [90m;; [39mEnabled compilation output.
2 [33m|[39m [90m;; [39mListing cleared.
1 [33m|[39m 2 [33m|[39m 3 [33m|[39m 4 [33m|[39m 5 [33m|[39m 6 [33m|[39m 7 [33m|[39m [90m;; [39mCompilation result:
[90m;; [39m(begin
[90m;; [39m  (define __global42
[90m;; [39m    (lambda (__env35 __value17)
[90m;; [39m      (let ((__value10 (+ (cdr __env35) __value17)))
[90m;; [39m        (if (> (kont-counter) 0)
[90m;; [39m          (let ((tmp51 (car __env35)))
[90m;; [39m            (dec-kont-counter!)
[90m;; [39m            ((vector-ref tmp51 2) (vector-ref tmp51 1) __value10))
[90m;; [39m          (begin (reset-kont-counter!) (resumable (car __env35) __value10))))))
[90m;; [39m  (define __global43
[90m;; [39m    (lambda (__env37 __value21)
[90m;; [39m      (let ((__value19 (+ (cdr __env37) __value21)))
[90m;; [39m        (if (> (kont-counter) 0)
[90m;; [39m          (let ((tmp52 (car __env37)))
[90m;; [39m            (dec-kont-counter!)
[90m;; [39m            ((vector-ref tmp52 2) (vector-ref tmp52 1) __value19))
[90m;; [39m          (begin (reset-kont-counter!) (resumable (car __env37) __value19))))))
[90m;; [39m  (define __global44
[90m;; [39m    (lambda (__env36 __value20)
[90m;; [39m      (let ((__value22 (- (vector-ref __env36 '2) '2)))
[90m;; [39m        (let ((tmp53 (vector-ref __env36 '1)))
[90m;; [39m          ((vector-ref tmp53 2)
[90m;; [39m           (vector-ref tmp53 1)
[90m;; [39m           __value22
[90m;; [39m           (vector
[90m;; [39m            &make-closure
[90m;; [39m            (cons (vector-ref __env36 '0) __value20)
[90m;; [39m            __global43))))))
[90m;; [39m  (define __global45
[90m;; [39m    (lambda (__env34 __value13)
[90m;; [39m      (let ((__value15 (- (vector-ref __env34 '2) '2)))
[90m;; [39m        (let ((__value18 (< __value15 '2)))
[90m;; [39m          (let ((__cont16
[90m;; [39m                 (vector
[90m;; [39m                  &make-closure
[90m;; [39m                  (cons (vector-ref __env34 '0) __value13)
[90m;; [39m                  __global42)))
[90m;; [39m            (if __value18
[90m;; [39m              (if (> (kont-counter) 0)
[90m;; [39m                (begin
[90m;; [39m                  (dec-kont-counter!)
[90m;; [39m                  ((vector-ref __cont16 2) (vector-ref __cont16 1) __value15))
[90m;; [39m                (begin (reset-kont-counter!) (resumable __cont16 __value15)))
[90m;; [39m              (let ((__value23 (- __value15 '1)))
[90m;; [39m                (let ((tmp54 (vector-ref __env34 '1)))
[90m;; [39m                  ((vector-ref tmp54 2)
[90m;; [39m                   (vector-ref tmp54 1)
[90m;; [39m                   __value23
[90m;; [39m                   (vector
[90m;; [39m                    &make-closure
[90m;; [39m                    (vector __cont16 (vector-ref __env34 '1) __value15)
[90m;; [39m                    __global44))))))))))
[90m;; [39m  (define __global46
[90m;; [39m    (lambda (__env39 __value26)
[90m;; [39m      (let ((__value24 (+ (cdr __env39) __value26)))
[90m;; [39m        (if (> (kont-counter) 0)
[90m;; [39m          (let ((tmp55 (car __env39)))
[90m;; [39m            (dec-kont-counter!)
[90m;; [39m            ((vector-ref tmp55 2) (vector-ref tmp55 1) __value24))
[90m;; [39m          (begin (reset-kont-counter!) (resumable (car __env39) __value24))))))
[90m;; [39m  (define __global47
[90m;; [39m    (lambda (__env38 __value25)
[90m;; [39m      (let ((__value27 (- (vector-ref __env38 '2) '2)))
[90m;; [39m        (let ((tmp56 (vector-ref __env38 '1)))
[90m;; [39m          ((vector-ref tmp56 2)
[90m;; [39m           (vector-ref tmp56 1)
[90m;; [39m           __value27
[90m;; [39m           (vector
[90m;; [39m            &make-closure
[90m;; [39m            (cons (vector-ref __env38 '0) __value25)
[90m;; [39m            __global46))))))
[90m;; [39m  (define __global48
[90m;; [39m    (lambda (__env33 __n2 __cont6)
[90m;; [39m      (let ((__value9 (< __n2 '2)))
[90m;; [39m        (if __value9
[90m;; [39m          (if (> (kont-counter) 0)
[90m;; [39m            (begin
[90m;; [39m              (dec-kont-counter!)
[90m;; [39m              ((vector-ref __cont6 2) (vector-ref __cont6 1) __n2))
[90m;; [39m            (begin (reset-kont-counter!) (resumable __cont6 __n2)))
[90m;; [39m          (let ((__value11 (- __n2 '1)))
[90m;; [39m            (let ((__value14 (< __value11 '2)))
[90m;; [39m              (let ((__cont12
[90m;; [39m                     (vector
[90m;; [39m                      &make-closure
[90m;; [39m                      (vector __cont6 __env33 __n2)
[90m;; [39m                      __global45)))
[90m;; [39m                (if __value14
[90m;; [39m                  (if (> (kont-counter) 0)
[90m;; [39m                    (begin
[90m;; [39m                      (dec-kont-counter!)
[90m;; [39m                      ((vector-ref __cont12 2)
[90m;; [39m                       (vector-ref __cont12 1)
[90m;; [39m                       __value11))
[90m;; [39m                    (begin
[90m;; [39m                      (reset-kont-counter!)
[90m;; [39m                      (resumable __cont12 __value11)))
[90m;; [39m                  (let ((__value28 (- __value11 '1)))
[90m;; [39m                    ((vector-ref __env33 2)
[90m;; [39m                     (vector-ref __env33 1)
[90m;; [39m                     __value28
[90m;; [39m                     (vector
[90m;; [39m                      &make-closure
[90m;; [39m                      (vector __cont12 __env33 __value11)
[90m;; [39m                      __global47)))))))))))
[90m;; [39m  (define __global49 (lambda (__env41 __value31) (+ __env41 __value31)))
[90m;; [39m  (define __global50
[90m;; [39m    (lambda (__env40 __value30)
[90m;; [39m      ((vector-ref __env40 2)
[90m;; [39m       (vector-ref __env40 1)
[90m;; [39m       '21
[90m;; [39m       (vector &make-closure __value30 __global49))))
[90m;; [39m  (let ((__env32 '()))
[90m;; [39m    (let ((__fib1 (vector &make-closure __env32 __global48)))
[90m;; [39m      (begin
[90m;; [39m        (vector-set! __fib1 1 __fib1)
[90m;; [39m        ((vector-ref __fib1 2)
[90m;; [39m         (vector-ref __fib1 1)
[90m;; [39m         '22
[90m;; [39m         (vector &make-closure __fib1 __global50))))))
[90m;; [39m28657
7 [33m|[39m 